"use strict";(globalThis["webpackChunkquedadas"]=globalThis["webpackChunkquedadas"]||[]).push([[78],{1652:(e,a,t)=>{t.d(a,{db:()=>c});var s=t(322),o=t(5874);const n={apiKey:"AIzaSyC8I0VxmtdkSS8ShMnamOHrUEaBHYUEdSA",authDomain:"quedadas-fc454.firebaseapp.com",databaseURL:"https://quedadas-fc454-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quedadas-fc454",storageBucket:"quedadas-fc454.appspot.com",messagingSenderId:"952662171024",appId:"1:952662171024:web:2de91b619b88b3b01c6715",measurementId:"G-9ENPZ5H423"},l=(0,s.Wp)(n),c=(0,o.C3)(l)},8078:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var s=t(1758),o=t(8790);const n={class:"vote-container"},l={key:0,class:"votes-list"};function c(e,a,t,c,u,d){const r=(0,s.g2)("q-btn"),i=(0,s.g2)("q-date"),p=(0,s.g2)("q-input"),m=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(m,{class:"q-pa-md"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.bF)(r,{onClick:d.goBack,color:"secondary",label:"Volver a la lista de planes",class:"back-button"},null,8,["onClick"]),(0,s.bF)(i,{modelValue:u.selectedDate,"onUpdate:modelValue":a[0]||(a[0]=e=>u.selectedDate=e),label:"Selecciona una fecha",class:"vote-input"},null,8,["modelValue"]),(0,s.bF)(p,{modelValue:u.userName,"onUpdate:modelValue":a[1]||(a[1]=e=>u.userName=e),label:"Tu nombre",class:"vote-input"},null,8,["modelValue"]),(0,s.bF)(r,{onClick:d.voteForDate,color:"primary",label:"Votar por esta fecha",class:"vote-button"},null,8,["onClick"]),u.votes.length?((0,s.uX)(),(0,s.CE)("div",l,[a[2]||(a[2]=(0,s.Lk)("h4",{class:"votes-title"},"Votos para este plan:",-1)),(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(u.votes,((e,a)=>((0,s.uX)(),(0,s.CE)("li",{key:a,class:"vote-item"},(0,o.v_)(e.date)+" - "+(0,o.v_)(e.names.length)+" votos: "+(0,o.v_)(e.names.join(", ")),1)))),128))])])):(0,s.Q3)("",!0)])])),_:1})}t(239);var u=t(5874),d=t(1652),r=t(455);const i={data(){return{selectedDate:"",userName:"",votes:[]}},setup(){const e=(0,r.rd)();return{router:e}},methods:{async voteForDate(){if(!this.selectedDate||!this.userName)return;const e=this.selectedDate,a=(0,u.KR)(d.db,`plans/${this.$route.params.id}/votes/${e}`),t=await(0,u.Jt)(a);let s=t.val()||{names:[]};s.names.includes(this.userName)||s.names.push(this.userName),await(0,u.hZ)(a,{names:s.names}),this.fetchVotes()},async fetchVotes(){const e=(0,u.KR)(d.db,`plans/${this.$route.params.id}/votes`);(0,u.Zy)(e,(e=>{let a=e.val()||{};const t=[];for(const s in a)for(const e in a[s])for(const o in a[s][e]){const n=a[s][e][o].names||[],l=`${s}-${e}-${o}`;t.push({date:l,names:n})}this.votes=t}))},goBack(){this.router.push("/")}},mounted(){this.fetchVotes()}};var p=t(2807),m=t(7716),h=t(62),b=t(8462),v=t(6183),f=t(8582),k=t.n(f);const g=(0,p.A)(i,[["render",c],["__scopeId","data-v-7a1c1091"]]),V=g;k()(i,"components",{QPage:m.A,QBtn:h.A,QDate:b.A,QInput:v.A})}}]);