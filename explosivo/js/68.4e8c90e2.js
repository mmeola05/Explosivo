"use strict";(globalThis["webpackChunkquedadas"]=globalThis["webpackChunkquedadas"]||[]).push([[68],{1652:(a,l,e)=>{e.d(l,{db:()=>i});var n=e(322),o=e(5874);const s={apiKey:"AIzaSyC8I0VxmtdkSS8ShMnamOHrUEaBHYUEdSA",authDomain:"quedadas-fc454.firebaseapp.com",databaseURL:"https://quedadas-fc454-default-rtdb.europe-west1.firebasedatabase.app",projectId:"quedadas-fc454",storageBucket:"quedadas-fc454.appspot.com",messagingSenderId:"952662171024",appId:"1:952662171024:web:2de91b619b88b3b01c6715",measurementId:"G-9ENPZ5H423"},t=(0,n.Wp)(s),i=(0,o.C3)(t)},5068:(a,l,e)=>{e.r(l),e.d(l,{default:()=>F});var n=e(1758),o=e(8790);const s={class:"plan-container"};function t(a,l,e,t,i,c){const d=(0,n.g2)("q-item-section"),r=(0,n.g2)("q-item"),p=(0,n.g2)("q-list"),u=(0,n.g2)("q-btn"),b=(0,n.g2)("new-plan-modal"),m=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(m,{class:"q-pa-md"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",s,[(0,n.bF)(p,{class:"plan-list"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.plans,(a=>((0,n.uX)(),(0,n.Wv)(r,{key:a.id,clickable:"",onClick:l=>c.goToPlan(a.id),class:"plan-item"},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(a.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,n.bF)(u,{onClick:c.openNewPlanModal,color:"primary",label:"Crear nuevo plan",class:"create-plan-button"},null,8,["onClick"]),i.isModalOpen?((0,n.uX)(),(0,n.Wv)(b,{key:0,visible:i.isModalOpen,onClose:l[0]||(l[0]=a=>i.isModalOpen=!1),onPlanCreated:c.fetchPlans},null,8,["visible","onPlanCreated"])):(0,n.Q3)("",!0)])])),_:1})}e(239);var i=e(5874),c=e(1652);function d(a,l,e,o,s,t){const i=(0,n.g2)("q-card-section"),c=(0,n.g2)("q-input"),d=(0,n.g2)("q-btn"),r=(0,n.g2)("q-card-actions"),p=(0,n.g2)("q-card"),u=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.Wv)(u,{modelValue:s.localVisible,"onUpdate:modelValue":l[1]||(l[1]=a=>s.localVisible=a)},{default:(0,n.k6)((()=>[(0,n.bF)(p,null,{default:(0,n.k6)((()=>[(0,n.bF)(i,null,{default:(0,n.k6)((()=>l[2]||(l[2]=[(0,n.Lk)("div",{class:"text-h6"},"Crear un nuevo plan",-1)]))),_:1}),(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.bF)(c,{modelValue:s.planName,"onUpdate:modelValue":l[0]||(l[0]=a=>s.planName=a),label:"Nombre del plan",class:"plan-input"},null,8,["modelValue"])])),_:1}),(0,n.bF)(r,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{flat:"",label:"Cancelar",color:"primary",onClick:t.closeDialog},null,8,["onClick"]),(0,n.bF)(d,{flat:"",label:"Crear",color:"primary",onClick:t.createPlan},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])}const r={props:["visible"],data(){return{planName:"",localVisible:this.visible}},watch:{visible(a){this.localVisible=a},localVisible(a){a||this.$emit("close")}},methods:{async createPlan(){if(console.log("Intentando crear un plan con el nombre:",this.planName),this.planName){const a=(0,i.KR)(c.db,"plans/");await(0,i.VC)(a,{name:this.planName}),console.log("Plan creado exitosamente"),this.closeDialog(),this.$emit("plan-created")}else console.log("El nombre del plan está vacío")},closeDialog(){console.log("Cerrando modal"),this.localVisible=!1}}};var p=e(2807),u=e(8675),b=e(3316),m=e(4189),g=e(6183),h=e(2669),k=e(62),f=e(8582),C=e.n(f);const v=(0,p.A)(r,[["render",d],["__scopeId","data-v-41b21075"]]),q=v;C()(r,"components",{QDialog:u.A,QCard:b.A,QCardSection:m.A,QInput:g.A,QCardActions:h.A,QBtn:k.A});const A={data(){return{plans:[],isModalOpen:!1}},components:{NewPlanModal:q},methods:{async fetchPlans(){const a=(0,i.KR)(c.db,"plans/");(0,i.Zy)(a,(a=>{const l=a.val();this.plans=l?Object.entries(l).map((([a,l])=>({id:a,...l}))):[],console.log("Planes obtenidos:",this.plans)}))},goToPlan(a){this.$router.push(`/plan/${a}`)},openNewPlanModal(){console.log("Abriendo modal para crear un nuevo plan"),this.isModalOpen=!0,console.log("isModalOpen:",this.isModalOpen)}},mounted(){this.fetchPlans()}};var P=e(7716),V=e(3999),_=e(124),I=e(5173);const Q=(0,p.A)(A,[["render",t],["__scopeId","data-v-eacf965e"]]),F=Q;C()(A,"components",{QPage:P.A,QList:V.A,QItem:_.A,QItemSection:I.A,QBtn:k.A})}}]);